<!doctype html><html lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><link rel=canonical type=text/html href=https://www.kubeclipper.io//v1.1/docs/><link rel=alternate type=application/rss+xml href=https://www.kubeclipper.io//v1.1/docs/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/v1.1/favicons/favicon.ico><link rel=apple-touch-icon href=/v1.1/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/v1.1/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/v1.1/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/v1.1/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/v1.1/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/v1.1/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/v1.1/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/v1.1/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/v1.1/favicons/android-192x192.png sizes=192x192><title>文档 | KubeClipper</title><meta name=description content="


This is a placeholder page that shows you how to use this template site.



This section is where the user documentation for your project lives - …"><meta property="og:title" content="文档"><meta property="og:description" content="☸️ Manage kubernetes in the most light and convenient way ☸️"><meta property="og:type" content="website"><meta property="og:url" content="https://www.kubeclipper.io//v1.1/docs/"><meta property="og:site_name" content="KubeClipper"><meta itemprop=name content="文档"><meta itemprop=description content="☸️ Manage kubernetes in the most light and convenient way ☸️"><meta name=twitter:card content="summary"><meta name=twitter:title content="文档"><meta name=twitter:description content="☸️ Manage kubernetes in the most light and convenient way ☸️"><link rel=preload href=/v1.1/scss/main.min.8e06a4662f78e6bea9247547ec59da9a543b48caadb4c359caf029c6f470f880.css as=style><link href=/v1.1/scss/main.min.8e06a4662f78e6bea9247547ec59da9a543b48caadb4c359caf029c6f470f880.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-00000000-0","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/v1.1/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30" viewBox="0 0 200 200" enable-background="new 0 0 200 200"><image id="image0" width="200" height="200" x="0" y="0" href="data:image/png;base64,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 RK5CYII="/></svg></span><span class=navbar-brand__name>KubeClipper</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/v1.1/docs/><span class=active>文档</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/v1.1/blog/><span>博客</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/v1.1/community/><span>社区</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>1.1</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/>vlatest (latest)</a>
<a class=dropdown-item href=/v1.3>v1.3</a>
<a class=dropdown-item href=/v1.2>v1.2</a>
<a class=dropdown-item href=/v1.1>v1.1</a></div></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>简体中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/v1.1/en/docs/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; 站内搜索…" aria-label=站内搜索… autocomplete=off data-offline-search-index-json-src=/v1.1/offline-search-index.0d239255ea54c37ec4fa0c33ddccb54a.json data-offline-search-base-href=/ data-offline-search-max-results=25></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>这是本节的多页打印视图。
<a href=# onclick="return print(),!1">点击此处打印</a>.</p><p><a href=/v1.1/docs/>返回本页常规视图</a>.</p></div><h1 class=title>文档</h1><ul><li>1: <a href=#pg-93aadc1aba179e6928539400a09b9e4e>快速开始</a></li><ul><li>1.1: <a href=#pg-51e07dd308860dc8b1808e7299ac75d8>部署AIO</a></li><li>1.2: <a href=#pg-45c14578741098628f1d483b1891e15d>使用 Kubeclipper 离线创建 k8s 集群</a></li></ul><li>2: <a href=#pg-6e17e09fffc1050f46600282def85180>概述</a></li><ul></ul><li>3: <a href=#pg-a07813ac798dd2637717ce2e67c448bd>部署文档</a></li><ul><li>3.1: <a href=#pg-c350c8cb338ccbf5a884d981eba290a6>部署 HA</a></li></ul><li>4: <a href=#pg-8dbd4e302cd86a4d0f71f71ce3b300de>使用手册</a></li><ul><li>4.1: <a href=#pg-502f2b1bbafe2aca0d506e0d2b495a3d>集群管理</a></li><li>4.2: <a href=#pg-f8b869abb7ea8ad8dbef714007033263>节点管理</a></li><li>4.3: <a href=#pg-9db4787abe05db7c233072bf3fa9f94e>访问控制</a></li></ul><li>5: <a href=#pg-8efbf7499fe9c7bde8d2c1bb7ff6ee3c>贡献指南</a></li><ul></ul></ul><div class=content><div class="pageinfo pageinfo-primary"><p>This is a placeholder page that shows you how to use this template site.</p></div><p>This section is where the user documentation for your project lives - all the information your users need to understand and successfully use your project.</p><p>For large documentation sets we recommend adding content under the headings in this section, though if some or all of them don’t apply to your project feel free to remove them or add your own. You can see an example of a smaller Docsy documentation site in the <a href=https://docsy.dev/docs/>Docsy User Guide</a>, which lives in the <a href=https://github.com/google/docsy/tree/master/userguide>Docsy theme repo</a> if you&rsquo;d like to copy its docs section.</p><p>Other content such as marketing material, case studies, and community updates should live in the <a href=/about/>About</a> and <a href=/community/>Community</a> pages.</p><p>Find out how to use the Docsy theme in the <a href=https://docsy.dev/docs/>Docsy User Guide</a>. You can learn more about how to organize your documentation (and how we organized this site) in <a href=https://docsy.dev/docs/best-practices/organizing-content/>Organizing Your Content</a>.</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-93aadc1aba179e6928539400a09b9e4e>1 - 快速开始</h1><div class=lead>快速搭建平台使用功能</div><p>对于初次接触 KubeClipper 并想快速上手的用户，建议使用 All-in-One 安装模式，它能够帮助您零配置快速部署 KubeClipper。</p><h3 id=准备工作>准备工作</h3><p>KubeClipper 本身并不会占用太多资源，但是为了后续更好的运行 Kubernetes 建议硬件配置不低于最低要求。</p><p>您仅需参考以下对机器硬件和操作系统的要求准备一台主机。</p><h4 id=硬件推荐配置>硬件推荐配置</h4><ul><li>确保您的机器满足最低硬件要求：CPU >= 2 核，内存 >= 2GB。</li><li>操作系统：CentOS 7.x / Ubuntu 18.04 / Ubuntu 20.04。</li></ul><h4 id=节点要求>节点要求</h4><ul><li>节点必须能够通过 <code>SSH</code> 连接。</li><li>节点上可以使用 <code>sudo</code> / <code>curl</code> / <code>wget</code> / <code>tar</code> 命令。</li></ul><blockquote><p>建议您的操作系统处于干净状态（不安装任何其他软件），否则可能会发生冲突。</p></blockquote><h3 id=部署-kubeclipper>部署 KubeClipper</h3><h4 id=下载-kcctl>下载 kcctl</h4><p>KubeClipper 提供了命令行工具🔧 kcctl 以简化运维工作，您可以直接使用以下命令下载最新版 kcctl：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># curl -sfL https://oss.kubeclipper.io/kcctl.sh | sh -</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 如果你在中国， 你可以在安装时使用 cn  环境变量, 此时我们会使用 registry.aliyuncs.com/google_containers 代替 k8s.gcr.io</span>
</span></span><span style=display:flex><span>curl -sfL https://oss.kubeclipper.io/kcctl.sh <span style=color:#000;font-weight:700>|</span> <span style=color:#000>KC_REGION</span><span style=color:#ce5c00;font-weight:700>=</span>cn sh -
</span></span></code></pre></div><blockquote><p>您也可以在 <a href=https://github.com/kubeclipper/kubeclipper/releases>GitHub Release Page</a> 下载指定版本。</p></blockquote><p>通过以下命令检测是否安装成功:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl version
</span></span></code></pre></div><h4 id=开始安装>开始安装</h4><p>在本快速入门教程中，您只需执行一个命令即可安装 KubeClipper，其模板如下所示：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy  <span style=color:#ce5c00;font-weight:700>[</span>--user root<span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>(</span>--passwd SSH_PASSWD <span style=color:#000;font-weight:700>|</span> --pk-file SSH_PRIVATE_KEY<span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>若使用 ssh passwd 方式则命令如下所示:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy --user root --passwd <span style=color:#000>$SSH_PASSWD</span>
</span></span></code></pre></div><p>私钥方式如下：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy --user root --pk-file <span style=color:#000>$SSH_PRIVATE_KEY</span>
</span></span></code></pre></div><blockquote><p>您只需要提供 ssh user 以及 ssh passwd 或者 ssh 私钥即可在本机部署 KubeClipper。</p></blockquote><p>执行该命令后，Kcctl 将检查您的安装环境，若满足条件将会进入安装流程。在打印出如下的 KubeClipper banner 后即表示安装完成。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic> _   __      _          _____ _ _
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>| | / /     | |        /  __ \ (_)
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>| |/ / _   _| |__   ___| /  \/ |_ _ __  _ __   ___ _ __
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>|    \| | | | &#39;_ \ / _ \ |   | | | &#39;_ \| &#39;_ \ / _ \ &#39;__|
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>| |\  \ |_| | |_) |  __/ \__/\ | | |_) | |_) |  __/ |
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>\_| \_/\__,_|_.__/ \___|\____/_|_| .__/| .__/ \___|_|
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>                                 | |   | |
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>                                 |_|   |_|
</span></span></span></code></pre></div><h3 id=登录控制台>登录控制台</h3><p>安装完成后，打开浏览器，访问 <code>http://$IP</code> 即可进入 KubeClipper 控制台。</p><p><img src=docs/img/console-login.png alt=console></p><p>您可以使用默认帐号密码 <code>admin / Thinkbig1</code> 进行登录。</p><blockquote><p>您可能需要配置端口转发规则并在安全组中开放端口，以便外部用户访问控制台。</p></blockquote><h3 id=创建-k8s-集群>创建 k8s 集群</h3><p>部署成功后您可以使用 <strong>kcctl 工具</strong>或者通过<strong>控制台</strong>创建 k8s 集群。在本快速入门教程中使用 kcctl 工具进行创建。</p><p>首先使用默认帐号密码进行登录获取 token，便于后续 kcctl 和 kc-server 进行交互。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl login -H http://localhost -u admin -p Thinkbig1
</span></span></code></pre></div><p>然后使用以下命令创建 k8s 集群:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000>NODE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>kcctl get node -o yaml<span style=color:#000;font-weight:700>|</span>grep ipv4DefaultIP:<span style=color:#000;font-weight:700>|</span>sed <span style=color:#4e9a06>&#39;s/ipv4DefaultIP: //&#39;</span><span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kcctl create cluster --master <span style=color:#000>$NODE</span> --name demo --untaint-master
</span></span></code></pre></div><p>大概 3 分钟左右即可完成集群创建,也可以使用以下命令查看集群状态</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl get cluster -o yaml<span style=color:#000;font-weight:700>|</span>grep status -A5
</span></span></code></pre></div><blockquote><p>您也可以进入控制台查看实时日志。</p></blockquote><p>进入 Running 状态即表示集群安装完成,您可以使用 <code>kubectl get cs</code> 命令来查看集群健康状况。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-51e07dd308860dc8b1808e7299ac75d8>1.1 - 部署AIO</h1><div class=lead>部署AIO环境</div><p>对于初次接触 KubeClipper 并想快速上手的用户，建议使用 All-in-One 安装模式，它能够帮助您零配置快速部署 KubeClipper。</p><h2 id=部署-kubeclipper>部署 KubeClipper</h2><h3 id=下载-kcctl>下载 kcctl</h3><p>KubeClipper 提供了命令行工具🔧 kcctl 以简化运维工作，您可以直接使用以下命令下载最新版 kcctl：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># curl -sfL https://oss.kubeclipper.io/kcctl.sh | sh -</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 如果你在中国， 你可以在安装时使用 cn  环境变量, 此时我们会使用 registry.aliyuncs.com/google_containers 代替 k8s.gcr.io</span>
</span></span><span style=display:flex><span>curl -sfL https://oss.kubeclipper.io/kcctl.sh <span style=color:#000;font-weight:700>|</span> <span style=color:#000>KC_REGION</span><span style=color:#ce5c00;font-weight:700>=</span>cn sh -
</span></span></code></pre></div><blockquote><p>您也可以在 <a href=https://github.com/kubeclipper/kubeclipper/releases>GitHub Release Page</a> 下载指定版本。</p></blockquote><p>通过以下命令检测是否安装成功:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl version
</span></span></code></pre></div><h3 id=开始安装>开始安装</h3><p>在本快速入门教程中，您只需执行一个命令即可安装 KubeClipper，其模板如下所示：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy  <span style=color:#ce5c00;font-weight:700>[</span>--user root<span style=color:#ce5c00;font-weight:700>]</span> <span style=color:#ce5c00;font-weight:700>(</span>--passwd SSH_PASSWD <span style=color:#000;font-weight:700>|</span> --pk-file SSH_PRIVATE_KEY<span style=color:#ce5c00;font-weight:700>)</span>
</span></span></code></pre></div><p>若使用 ssh passwd 方式则命令如下所示:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy --user root --passwd <span style=color:#000>$SSH_PASSWD</span>
</span></span></code></pre></div><p>私钥方式如下：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy --user root --pk-file <span style=color:#000>$SSH_PRIVATE_KEY</span>
</span></span></code></pre></div><blockquote><p>您只需要提供 ssh user 以及 ssh passwd 或者 ssh 私钥即可在本机部署 KubeClipper。</p></blockquote><p>执行该命令后，Kcctl 将检查您的安装环境，若满足条件将会进入安装流程。在打印出如下的 KubeClipper banner 后即表示安装完成。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#000;font-style:italic> _   __      _          _____ _ _
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>| | / /     | |        /  __ \ (_)
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>| |/ / _   _| |__   ___| /  \/ |_ _ __  _ __   ___ _ __
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>|    \| | | | &#39;_ \ / _ \ |   | | | &#39;_ \| &#39;_ \ / _ \ &#39;__|
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>| |\  \ |_| | |_) |  __/ \__/\ | | |_) | |_) |  __/ |
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>\_| \_/\__,_|_.__/ \___|\____/_|_| .__/| .__/ \___|_|
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>                                 | |   | |
</span></span></span><span style=display:flex><span><span style=color:#000;font-style:italic>                                 |_|   |_|
</span></span></span></code></pre></div><h3 id=登录控制台>登录控制台</h3><p>安装完成后，打开浏览器，访问 <code>http://$IP</code> 即可进入 KubeClipper 控制台。</p><p><img src=/images/docs-quickstart/console-login.png alt=console></p><p>您可以使用默认帐号密码 <code>admin / Thinkbig1</code> 进行登录。</p><blockquote><p>您可能需要配置端口转发规则并在安全组中开放端口，以便外部用户访问控制台。</p></blockquote><h2 id=创建-k8s-集群>创建 k8s 集群</h2><p>部署成功后您可以使用 <strong>kcctl 工具</strong>或者通过<strong>控制台</strong>创建 k8s 集群。在本快速入门教程中使用 kcctl 工具进行创建。</p><p>首先使用默认帐号密码进行登录获取 token，便于后续 kcctl 和 kc-server 进行交互。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl login -H http://localhost -u admin -p Thinkbig1
</span></span></code></pre></div><p>然后使用以下命令创建 k8s 集群:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#000>NODE</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#204a87;font-weight:700>$(</span>kcctl get node -o yaml<span style=color:#000;font-weight:700>|</span>grep ipv4DefaultIP:<span style=color:#000;font-weight:700>|</span>sed <span style=color:#4e9a06>&#39;s/ipv4DefaultIP: //&#39;</span><span style=color:#204a87;font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>kcctl create cluster --master <span style=color:#000>$NODE</span> --name demo --untaint-master
</span></span></code></pre></div><p>大概 3 分钟左右即可完成集群创建,也可以使用以下命令查看集群状态</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl get cluster -o yaml<span style=color:#000;font-weight:700>|</span>grep status -A5
</span></span></code></pre></div><blockquote><p>您也可以进入控制台查看实时日志。</p></blockquote><p>进入 Running 状态即表示集群安装完成,您可以使用 <code>kubectl get cs</code> 命令来查看集群健康状况。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-45c14578741098628f1d483b1891e15d>1.2 - 使用 Kubeclipper 离线创建 k8s 集群</h1><div class=lead>如何使用 KC 平台离线创建 k8s 集群</div><h2 id=1-进入创建界面>1. 进入创建界面</h2><p>登录 Kubeclipper 平台后点击如图所示按钮，进入集群创建界面</p><p><img src=/images/docs-quickstart/cluster-begin.png alt></p><h2 id=2-配置集群节点>2. 配置集群节点</h2><p>按照文字提示完成输入集群名称、选择节点等步骤</p><p>注意: master 节点数量不能为偶数</p><p><img src=/images/docs-quickstart/cluster-node-config.png alt></p><h2 id=3-配置集群>3. 配置集群</h2><p>此步骤用于配置集群网络以及数据库、容器运行时等组件</p><p>选择离线安装并填写首先搭建好的镜像仓库地址</p><p><img src=/images/docs-quickstart/cluster-config.png alt></p><h2 id=4-配置存储>4. 配置存储</h2><p>选择 nfs 存储，按照文字提示填写相应内容</p><p><img src=/images/docs-quickstart/cluster-storage-config.png alt></p><h2 id=5-安装完成>5. 安装完成</h2><p>完成所有配置确认安装</p><p><img src=/images/docs-quickstart/cluster-finish.png alt></p><p>安装成功，集群正常运行</p><p><img src=/images/docs-quickstart/cluster-successful.png alt></p></div><div class=td-content style=page-break-before:always><h1 id=pg-6e17e09fffc1050f46600282def85180>2 - 概述</h1><div class=lead>Manage kubernetes in the most light and convenient way ☸️</div><ul><li><a href=/docs/getting-started/>快速开始</a>: Get started with $project</li><li><a href=/docs/tutorials>用户手册</a>: Check out some example code!</li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-a07813ac798dd2637717ce2e67c448bd>3 - 部署文档</h1><div class=lead>Low level reference docs for your project.</div><div class="pageinfo pageinfo-primary"><p>This is a placeholder page that shows you how to use this template site.</p></div><p>If your project has an API, configuration, or other reference - anything that users need to look up that’s at an even lower level than a single task - put (or link to it) here. You can serve and link to generated reference docs created using Doxygen,
Javadoc, or other doc generation tools by putting them in your <code>static/</code> directory. Find out more in <a href=https://docsy.dev/docs/adding-content/content/#adding-static-content>Adding static content</a>. For OpenAPI reference, Docsy also provides a <a href=https://www.docsy.dev/docs/adding-content/shortcodes/#swaggerui>Swagger UI layout and shortcode</a> that renders <a href=https://swagger.io/tools/swagger-ui/>Swagger UI</a> using any OpenAPI YAML or JSON file as source.</p></div><div class=td-content style=page-break-before:always><h1 id=pg-c350c8cb338ccbf5a884d981eba290a6>3.1 - 部署 HA</h1><div class=lead>通过简单的操作部署一个高可用的 kubeclipper</div><p>本文档旨在通过简单的操作部署一个 HA 版本的 kubeclipper。</p><blockquote><p>如果只是想简单体验一下，请参考 <a href=https://github.com/kubeclipper/kubeclipper/blob/master/README_zh.md#quick-start>QuickStart</a> 部署 AIO 环境。</p></blockquote><h2 id=准备工作>准备工作</h2><p>HA 部署注意事项：</p><ul><li>kubeclipper 使用 etcd 作为后端存储，为了保证高可用，建议使用 3 节点及以上来部署。</li><li>生产环境建议 server 节点和 agent 节点分离，避免某一主机同时作为 server 节点和 agent 节点。</li></ul><p>主机要求：您仅需参考 <a href=https://github.com/kubeclipper/kubeclipper/blob/master/README_zh.md#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C>准备工作</a> 中对机器硬件和操作系统的要求准备多台主机。</p><h2 id=部署-kubeclipper>部署 KubeClipper</h2><h3 id=下载-kcctl>下载 kcctl</h3><p>KubeClipper 提供了命令行工具🔧 kcctl 以简化运维工作，您可以直接使用以下命令下载最新版 kcctl：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#8f5902;font-style:italic># curl -sfL https://oss.kubeclipper.io/kcctl.sh | sh -</span>
</span></span><span style=display:flex><span><span style=color:#8f5902;font-style:italic># 如果你在中国， 你可以在安装时使用 cn  环境变量, 此时我们会使用 registry.aliyuncs.com/google_containers 代替 k8s.gcr.io</span>
</span></span><span style=display:flex><span>curl -sfL https://oss.kubeclipper.io/kcctl.sh <span style=color:#000;font-weight:700>|</span> <span style=color:#000>KC_REGION</span><span style=color:#ce5c00;font-weight:700>=</span>cn sh -
</span></span></code></pre></div><blockquote><p>您也可以在 <a href=https://github.com/kubeclipper/kubeclipper/releases>GitHub Release Page</a> 下载指定版本。</p></blockquote><p>通过以下命令检测是否安装成功:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl version
</span></span></code></pre></div><h3 id=开始安装>开始安装</h3><p>您只需执行一个命令即可安装 KubeClipper，其模板如下所示：</p><pre tabindex=0><code>kcctl deploy  [--user root] (--passwd SSH_PASSWD | --pk-file SSH_PRIVATE_KEY) (--server SERVER_NODES) (--agent AGENT_NODES)
</code></pre><p>若使用 ssh passwd 方式则命令如下所示:</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy --user root --passwd <span style=color:#000>$SSH_PASSWD</span> --server SERVER_NODES --agent AGENT_NODES
</span></span></code></pre></div><p>私钥方式如下：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy --user root --pk-file <span style=color:#000>$SSH_PRIVATE_KEY</span> --server SERVER_NODES --agent AGENT_NODES
</span></span></code></pre></div><blockquote><p>您只需要提供 ssh user 以及 ssh passwd 或者 ssh 私钥即可在对应节点部署 KubeClipper。</p></blockquote><p>本教程使用 私钥 方式进行部署，具体命令如下：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kcctl deploy --server 192.168.10.110,192.168.10.111,192.168.10.112 --agent 192.168.10.113,192.168.10.114,192.168.10.115 --pk-file ~/.ssh/id_rsa --pkg https://oss.kubeclipper.io/release/v1.1.0/kc-amd64.tar.gz
</span></span></code></pre></div><blockquote><p>该命令指定 kubeclipper 包含 3 server 节点，3 agent 节点。</p></blockquote><p>您可以访问 <a href=https://github.com/kubeclipper/kubeclipper/releases>GitHub Release Page</a> 查看当前 KubeClipper 的 Release 版本，来修改 pkg 参数中的版本号。</p><blockquote><p>比如在 v1.2.0 版本 release 之后您可以指定 &ndash;pkg 为 <code>https://oss.kubeclipper.io/release/v1.2.0/kc-amd64.tar.gz</code> 来安装 v1.2.0 版本。</p></blockquote><p>执行该命令后，Kcctl 将检查您的安装环境，若满足条件将会进入安装流程。在打印出如下的 KubeClipper banner 后即表示安装完成。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span> _   __      _          _____ _ _
</span></span><span style=display:flex><span>| | / /     | |        /  __ \ (_)
</span></span><span style=display:flex><span>| |/ / _   _| |__   ___| /  \/ |_ _ __  _ __   ___ _ __
</span></span><span style=display:flex><span>|    \| | | | &#39;_ \ / _ \ |   | | | &#39;_ \| &#39;_ \ / _ \ &#39;__|
</span></span><span style=display:flex><span>| |\  \ |_| | |_) |  __/ \__/\ | | |_) | |_) |  __/ |
</span></span><span style=display:flex><span>\_| \_/\__,_|_.__/ \___|\____/_|_| .__/| .__/ \___|_|
</span></span><span style=display:flex><span>                                 | |   | |
</span></span><span style=display:flex><span>                                 |_|   |_|
</span></span></code></pre></div><h3 id=登录控制台>登录控制台</h3><p>安装完成后，打开浏览器，访问 <code>http://$IP</code> 即可进入 KubeClipper 控制台。
<img src=/images/docs-quickstart/console-login.png alt=console></p><p>您可以使用默认帐号密码 <code>admin / Thinkbig1</code> 进行登录。</p><blockquote><p>您可能需要配置端口转发规则并在安全组中开放端口，以便外部用户访问控制台。</p></blockquote></div><div class=td-content style=page-break-before:always><h1 id=pg-8dbd4e302cd86a4d0f71f71ce3b300de>4 - 使用手册</h1><div class=lead>用户使用手册</div></div><div class=td-content><h1 id=pg-502f2b1bbafe2aca0d506e0d2b495a3d>4.1 - 集群管理</h1><div class=lead>KubeClipper 集群管理功能使用指南</div><h2 id=创建集群>创建集群</h2><p>您可以通过向导式的页面创建 K8S 集群，并安装CNI、CSI等所需插件。也可以提前保存好集群模版，选择模版后快速创建集群。</p><h3 id=创建集群准备工作>创建集群准备工作</h3><ol><li><p>您需要准备充足的可用节点，如需添加节点，参见“添加节点”教程。</p></li><li><p>准备好需要部署的 K8S、CRI、calico、CSI 和其他插件的镜像或二进制文件，kubeclipper 提供了推荐的版本，您可以根据平台所处网络环境，选择在线 / 离线后，直接在页面上选取使用。您也可以将部署所需的镜像上传至自己的镜像仓库，并在部署时指定。更多安装配置，参考以下表格：</p><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>页面配置</td><td>配置包/镜像来源</td></tr><tr><td><strong>在线</strong>（公网环境）<br><br><strong>镜像仓库</strong>为空</td><td>1. 配置包来源：从 kubeclipper.io 下载。<br><br><br>2. 镜像拉取方式：镜像默认从官方镜像仓库拉取，如k8s镜像从 k8s.gcr.io 拉取、calico 从 docker.io 拉取。</td></tr><tr><td><strong>在线</strong>（公网环境）<br><br><strong>镜像仓库</strong>指定</td><td>1. 配置包来源：从 kubeclipper.io 下载。<br><br><br>2. 镜像拉取方式：从填写的镜像仓库拉取，组件将默认继承该仓库地址，请确保该仓库存在相关组件镜像；组件也会提供独立的镜像仓库参数，设置后组件镜像从该地址拉取。</td></tr><tr><td><strong>离线</strong>（内网环境）<br><br><strong>镜像仓库</strong>为空<br><br><br></td><td>1. 配置包来源：从本地 kubeclipper 集群server节点下载，您可以使用 kcctl resource list 命令查看本地可用配置包，或使用 kcctl resource push 命令上传所需配置包。<br><br><br>2. 镜像拉取方式：从本地 kubeclipper 集群server节点下载，下载后由CRI进行镜像导入。您可以使用 kcctl resource list 命令查看本地可用镜像包，或使用 kcctl resource push 命令上传所需镜像包。</td></tr><tr><td><strong>离线</strong>（内网环境）<br><br><strong>镜像仓库</strong>指定<br><br><br><br><br><br></td><td>1. 配置包来源：从本地下载，您可以使用 kcctl resource list 命令查看本地可用配置包，或使用 kcctl resource push 命令上传所需配置包。<br><br><br>2. 镜像拉取方式：从填写的镜像仓库拉取，组件将默认继承该仓库地址，请确保该仓库存在相关组件镜像；组件也会提供独立的镜像仓库参数，设置后组件镜像从该地址拉取。kubeclipper 提供 Docker Registry 方案，并使用 kcctl registry 命令行进行管理，您也可以使用其他自有镜像仓库。</td></tr></tbody></table></li></ol><h3 id=创建单节点实验集群>创建单节点实验集群</h3><ol><li><p>点击“集群管理”>“集群”，进入集群列表页面，点击左上角“创建集群”按钮。</p></li><li><p>进入创建集群向导页面的“节点配置”页面。填写“集群名称”，如“test”，不需选择“集群模版”。选择一个可用节点，添加为控制节点，并在污点管理列表中，将 master 节点的污点移除。点击“下一步”按钮。</p></li></ol><p><img src=/images/docs-tutorials/select-node.png alt></p><ol><li><p>进入创建集群向导页面的“集群配置”页面。选择“离线安装”，“镜像仓库”不需填写，其他配置都可使用默认配置，点击“快速创建”按钮，跳转配置确认页面，点击“确认”按钮。</p></li><li><p>单节点的实验集群创建完成，您可以在集群详情页查看集群详情，也可以点击“查看日志”按钮，查看集群创建过程中的实时日志。</p></li></ol><h3 id=使用镜像仓库创建集群>使用镜像仓库创建集群</h3><p>如果创建的集群中包含较大的镜像，推荐您将所有镜像上传到特定的镜像仓库，创建集群会更快速更顺畅。</p><ol><li><p>添加镜像仓库。点击“集群管理”>“镜像仓库”，进入镜像仓库列表页面，点击左上角“添加”按钮。在添加镜像仓库的弹窗中输入存放有镜像的仓库 IP 地址，点击“确定”按钮。</p></li><li><p>创建集群。点击“集群管理”>“集群”，进入集群列表页面，点击左上角“创建集群”按钮。按需配置集群节点，在“集群配置”页面的“镜像仓库”中，选择第一步添加的镜像仓库，根据需要完成集群其他配置后创建集群。</p></li></ol><h3 id=使用集群模版创建集群>使用集群模版创建集群</h3><p>您可以使用集群模版，简化集群创建流程。</p><ol><li><p>添加模版。保存模版有两种方式，您可以在“集群管理”>“模版管理”页面，添加集群模版，以备创建集群时使用。也可以点击集群操作中的“更多”>“保存为模版”，将已存在的集群配置保存为模版，以便创建出和该集群同等配置的 K8S 集群。</p></li><li><p>创建集群。点击“集群管理”>“集群”，进入集群列表页面，点击左上角“创建集群”按钮，进入创建集群页面，填写“集群名称”，如“demo”，选择第一步中保存的集群模版，添加所需节点，点击右下角“快速创建”按钮，跳转至“配置确认”页面，核对模版信息无误后，点击“确认”按钮，创建集群。</p></li></ol><h3 id=集群配置指南>集群配置指南</h3><h4 id=节点配置步骤>节点配置步骤</h4><p>在节点配置页面，您可以对节点进行以下配置：</p><ul><li><p>区域：集群所属区域，添加节点时可为节点指定物理的或逻辑的区域，使用该区域下节点创建的 K8S 集群也属于该区域，不支持使用跨区域的多个节点创建集群。</p></li><li><p>控制节点：为集群指定奇数个的控制节点，生产环境一般使用3个控制节点以实现高可用。</p></li><li><p>工作节点：根据业务规模，为新集群添加工作节点。</p></li><li><p>污点管理：您可以为已添加的节点配置污点，kubeclipper 会自动为控制节点添加不允许调度（noschedule）的污点，您也可以根据需要进行更改。</p></li><li><p>节点标签：您可以根据需要为已添加的集群节点配置标签。</p></li></ul><p>您可以按业务需要配置所需节点。如果需要创建非高可用的实验集群，也可以仅添加一个控制节点，并将控制节点自动添加的污点移除，详细操作参见“创建单节点实验集群”。</p><h4 id=集群配置步骤>集群配置步骤</h4><p>在集群配置页面，您可以对集群进行以下配置：</p><ul><li>安装方式和镜像仓库：</li></ul><table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td>页面配置</td><td>配置包/镜像来源</td></tr><tr><td><strong>在线</strong>（公网环境）<br><br><strong>镜像仓库</strong>为空</td><td>1. 配置包来源：从 kubeclipper.io 下载。<br><br><br>2. 镜像拉取方式：镜像默认从官方镜像仓库拉取，如k8s镜像从 k8s.gcr.io 拉取、calico 从 docker.io 拉取。</td></tr><tr><td><strong>在线</strong>（公网环境）<br><br><strong>镜像仓库</strong>指定</td><td>1. 配置包来源：从 kubeclipper.io 下载。<br><br><br>2. 镜像拉取方式：从填写的镜像仓库拉取，组件将默认继承该仓库地址，请确保该仓库存在相关组件镜像；组件也会提供独立的镜像仓库参数，设置后组件镜像从该地址拉取。</td></tr><tr><td><strong>离线</strong>（内网环境）<br><br><strong>镜像仓库</strong>为空</td><td>1. 配置包来源：从本地 kubeclipper 集群server节点下载，您可以使用 kcctl resource list 命令查看本地可用配置包，或使用 kcctl resource push 命令上传所需配置包。<br><br><br>2. 镜像拉取方式：从本地 kubeclipper 集群server节点下载，下载后由CRI进行镜像导入。您可以使用 kcctl resource list 命令查看本地可用镜像包，或使用 kcctl resource push 命令上传所需镜像包。</td></tr><tr><td><strong>离线</strong>（内网环境）<br><br><strong>镜像仓库</strong>指定<br><br><br><br><br><br></td><td>1. 配置包来源：从本地下载，您可以使用 kcctl resource list 命令查看本地可用配置包，或使用 kcctl resource push 命令上传所需配置包。<br><br><br>2. 镜像拉取方式：从填写的镜像仓库拉取，组件将默认继承该仓库地址，请确保该仓库存在相关组件镜像；组件也会提供独立的镜像仓库参数，设置后组件镜像从该地址拉取。kubeclipper 提供 Docker Registry 方案，并使用 kcctl registry 命令行进行管理，您也可以使用其他自有镜像仓库。</td></tr></tbody></table><ul><li><p>K8S版本：指定集群K8S版本。当您选择离线安装的时候，可以从当前环境中配置包的K8S版本中选择；当您选择在线安装的时候，可以从 kubeclipper 官方推荐的版本中选择。</p></li><li><p>ETCD数据目录：可指定ETCD 数据目录，默认为/var/lib/etcd。</p></li><li><p>CertSANs：k8s 集群 ca 证书签名的 ip 或者域名，可填写多个。</p></li><li><p>容器运行时：根据指定 K8S 版本，K8S 版本在 v1.20.0 之前，容器运行时默认 docker，之后默认 containerd；v1.24.0 之后不支持 docker。</p></li><li><p>容器运行时版本：指定containerd / docker版本。与 K8S 相同，当您选择离线安装的时候，可以从当前环境中配置包的版本中选择；当您选择在线安装的时候，可以从 kubeclipper 官方推荐的版本中选择。</p></li><li><p>Containerd 数据目录：可填写config.toml 配置中的 root dir，默认为/var/lib/containerd。</p></li><li><p>Docker数据目录：可填写daemon.json 配置中的 root dir，默认为/var/lib/docker。</p></li><li><p>Containerd 镜像仓库：存放containerd镜像的仓库地址，config.toml 配置中的 registry.mirrors，可填写多个。</p></li><li><p>Docker镜像仓库：存放docker镜像的仓库地址，daemon.json 配置中的 insecure registry,可填写多个。</p></li><li><p>DNS 域名：k8s 集群的域名，默认为cluster.local。</p></li><li><p>Worker 负载 IP：用于 worker 节点到多master的负载均衡，单一master不需要设置。</p></li><li><p>外部访问IP：可以填写一个浮动 IP 给用户访问，可为空。</p></li></ul><h4 id=cni配置>CNI配置</h4><p>当前版本仅支持Calico作为集群CNI。</p><p>Calico将用户设置的pod cidr分为若干个block(网段)，根据业务需求动态的分配给需要的节点，并在节点中通过 bgp peer维护集群节点的路由表。</p><p>例如：容器的地址池：172.25.0.0/16，动态分配的网段池: 172.25.0.0 - 172.25.255.192 (172.25.0.0/26 即 10 个比特位)，动态分配的网段数: 1023，每个网段的pod数量为: 61 (193-254)，总pod数量为1023 * 61 = 62403，相对最大节点数(按照200业务pod为基准值)：312。</p><p>目前不建议大于50个节点的集群，大于50个节点的集群建议手动配置route reflection，用来优化集群中的节点的路由表维护的稳定性。</p><p>使用Calico作为集群CNI，您需要进行以下配置：</p><ul><li><p>Calico 模式：支持5种网络模式：</p><ul><li><p>Overlay-IPIP-All: 使用 IP-in-IP 技术打通不同节点的 pod 的网络,通常这样的方式使用在底层平台是 iaas 的环境之中,当然如果你底层网路环境直接是物理设备的也完全可以使用只不过效率和灵活度都会大打折扣,需要注意的是你需要确认底层网络环境(underlay)是支持 IPIP 协议的.(使用overlay的网络方式对网络性能造成一定的影响)。</p></li><li><p>Overlay-Vxlan-All: 使用 IP-in-IP 技术打通不同节点的 pod 的网络,通常这样的方式使用在底层平台是 iaas 的环境之中,当然如果你底层网路环境直接是物理设备的也完全可以使用只不过效率和灵活度都会大打折扣,他理论上可以在任何的网络环境上运行,通常在底层环境不支持 IPIP 协议的时候我们会使用他.(使用overlay的网络方式对网络性能造成一定的影响)。</p></li><li><p>BGP: 使用 IP-in-IP 技术打通不同节点的 pod 的网络,通常这样的方式使用在裸机的环境上,当然底 Iaas 平台支持 BGP 的话也是可以使用的,这种模式下 pod 的 ip 通信是通过 集群中的各个节点中互相交换路由表来完成 pod 之间的通信的,如果你需要手动打通多个集群之间的 pod 网络需要注意你分配的地址断不应该有冲突。</p></li><li><p>Overaly-IPIP-Cross-Subnet: 使用 IP-in-IP 技术打通不同节点的 pod 的网络,通常这样的方式使用在底层平台是 iaas 的环境之中,需要注意的是你需要确认底层网络环境(underlay)是支持 IPIP 协议的.和 Overlay-IPIP-All 的不同之处在于,如果 2 个不同节点但在同一个网段中的上 pod 互相通信时是通过路由表,这样可以提高在不同节点但在同一个网段中的上 pod 互相通信时的效率。</p></li><li><p>Overaly-Vxlan-Cross-Subnet: 和 Overaly-IPIP-Cross-Subnet 逻辑相似不再做重复的解释。</p></li></ul></li><li><p>IP版本：可指定IP版本为IPV4或IPV4 IPV6双栈。</p></li><li><p>服务子网：填写service子网CIDR，v4默认为：10.96.0.0/16，v6默认为fd03::/112，注意Service网络不得与任何主机网络重叠。</p></li><li><p>Pod CIDR：填写pod子网CIDR，v4默认：172.25.0.0/24，v6默认为fd05::/120，注意Pod 网络不得与任何主机网络重叠。</p></li><li><p>pod网路的底层：</p><ul><li><p>first-found（默认）：程序会根据ipfamily(v4或v6)遍历所有的有效的ip地址(local,loop back，docker bridge等会被自动排除)通常如果是多网卡时会排除默认网关以外的网卡的ip作为节点之间的路由地址。</p></li><li><p>can-reach：通过检查域名或者ip的可达性来设置节点之间的路由地址。</p></li><li><p>interface：根据正则表达式获取所有满足的网卡设备名称并返回第一个满足表达式网卡的地址作为节点之间的路由地址。</p></li></ul></li><li><p>MTU：为Calico环境配置最大传输单元(MTU)，建议不大于1440，默认为1440，详情见 <a href=https://docs.projectcalico.org/networking/mtu>Configure MTU to maximize network performance</a>。</p></li></ul><h4 id=存储配置>存储配置</h4><p>Kubeclipper当前版本内置了 NFS、Ceph 两种外接存储类型。</p><ul><li><strong>对接NFS存储</strong></li></ul><p>对接NFS类型的外接存储，您需要设置以下内容：</p><style>td{white-space:pre-wrap;border:1px solid #dee0e3}</style><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>字段</td><td>作用说明</td><td>填写说明/可选项</td></tr><tr><td>服务地址</td><td>ServerAddr，NFS的服务地址</td><td>必填</td></tr><tr><td>共享路径</td><td>SharedPath，NFS的服务挂载路径</td><td>必填</td></tr><tr><td>存储类</td><td>StorageClassName，存储类的名称</td><td>默认为 nfs-sc，可自定义名称，不可与集群其他存储类重复</td></tr><tr><td>回收策略</td><td>ReclaimPolicy，VPC回收策略</td><td>删除 Delete / 保留 Retain</td></tr><tr><td>删除后归档</td><td>ArchiveOnDelete，是否在删除后归档PVC</td><td>是 / 否</td></tr><tr><td>挂载选项</td><td>MountOptions，NFS 的 options 参数，如nfsvers=4.1</td><td>选填，可填写多个</td></tr><tr><td>副本数</td><td>Replicas，NFS provisioner副本数</td><td>默认为1</td></tr></tbody></table><p>NFS类型的存储默认可对接多个，点击下方“继续添加”按钮，可以添加多个NFS存储，注意存储类名称不可重复。</p><p>设置完外接存储后，下方卡片会显示您已经开启的存储，您可以选择一个存储类作为默认存储，对于未指定特定StorageClass 的 PVC ，会直接使用默认的存储类。</p><h2 id=集群操作日志查看>集群操作日志查看</h2><p>在集群详情页面，点击“操作日志”标签页，可以查看集群操作日志列表。点击操作日志右侧“查看日志”按钮，可以在弹窗中查看全部步骤和节点的详细日志。点击左侧步骤名称，可查看执行步骤详细的日志输出。</p><p>在集群操作执行过程中，点击查看日志，您可以实时查看到日志更新来跟踪操作执行情况。对于执行失败的任务，您也可以通过查看日志，找到红色圆点标注的执行步骤和节点，快速定位错误，排查操作失败原因。</p><p><img src="https://zhc3o5gmf9.feishu.cn/space/api/box/stream/download/asynccode/?code=YmM4ZjUzODc3MThmZWIxNTVmODUzZmI1YzMzNzAxYTVfOVJ3QURVS2RnOWJrRTJiRHBPOWpDZEdpMWJZRU4yWm5fVG9rZW46Ym94Y25Xc3VmcE52dE1LNGJRRlRvTk9GTEtnXzE2NjA2MzQzNzE6MTY2MDYzNzk3MV9WNA" alt></p><h2 id=访问集群-kubectl>访问集群 kubectl</h2><p>您可以访问运行中集群的 kubectl，点击集群操作中的“更多”>“连接终端”，就可以在集群 kuebectl 弹窗中执行 kubectl 命令行操作。</p><h2 id=集群插件管理>集群插件管理</h2><p>除了在创建集群时安装插件，您也可以为运行中的集群安装存储和其他自定义插件。以安装存储插件为例，点击集群操作中的“更多”>“添加存储项”按钮，进入添加存储项页面，可以为集群安装 NFS 或Ceph 类型的存储插件，安装配置与创建集群中的配置相同。</p><p>对于已安装的插件，您可以在集群详情页查看插件信息。可以点击插件卡片右上角的“保存为模版”按钮，将插件信息保存为模版，以便为其他集群使用。也可以点击插件卡片右上角的“移除”按钮，卸载集群插件。</p><h2 id=集群节点管理>集群节点管理</h2><p>在集群详情页的“节点”列表页面，您可以查看当前集群中的节点列表，节点的规格、状态和角色信息。</p><h3 id=添加集群节点>添加集群节点</h3><p>当集群负载较高时，您可以通过为集群添加节点来达到主动扩容的目的，添加新的“节点”不会影响现有的业务的运行。</p><p>在集群详情页的节点列表标签页下，点击左侧的“添加节点”按钮，在弹窗中选择可用节点，设置节点标签，点击“确认”按钮。当前版本仅支持添加工作节点。</p><h3 id=移除集群节点>移除集群节点</h3><p>在集群详情页的节点列表标签页下，您可以点击节点右侧的 “移除”按钮移除节点。当前版本仅支持移除工作节点。</p><p>注意：移除集群节点，您需要注意生产中的安全问题，避免应用发生中断。</p><h2 id=集群版本升级>集群版本升级</h2><p>当集群版本不满足需要，您可以为集群升级 K8S 版本。与创建集群一样，您需要准备好集群版本所需配置包和目标版本的 K8S 镜像并上传至指定位置，详情参见“创建集群准备工作”。</p><p>点击集群操作的“更多”>“集群升级”按钮，在集群升级弹窗中选择安装方式和镜像仓库，选择升级的目标版本，升级的安装方式和 K8S 版本的配置与创建集群相同，详情参见“集群配置指南”。</p><p>集群升级可以跨小版本，但不支持略过次版本的升级，如您可以从v1.20.2升级到v1.20.13，或由v1.20.x升级到v1.21.x，但不支持从v1.20.x升级到v1.22.x。对于1.23.x版本，暂不支持升级到1.24.x版本。</p><p>升级集群操作可能需要较长时间，您可以在集群详情页面查看操作日志，跟踪集群升级状态。</p><h2 id=集群备份与恢复>集群备份与恢复</h2><p>KubeClipper 对 k8s 集群的备份主要为备份 ETCD 数据库数据，以及 k8s 的资源对象备份，如 namespace，deployment、configMap。对资源自身产生的文件和数据不做备份，例如对集群中运行的 mysql pod，该 mysql pod 产生的数据和文件，不会为之备份，同理，文件类的 pv 对象下的文件，也不做备份，仅仅备份 pv 这个对象。KubeClipper 提供的备份功能是热备份，备份期间不影响集群的使用。KubeClipper 虽然不反对在集群 &ldquo;繁忙期&rdquo; 备份，但也强烈不赞成在集群 &ldquo;繁忙期&rdquo; 备份。</p><h3 id=创建备份点>创建备份点</h3><p>执行备份之前，您需要先为集群设置备份点，即设置备份文件的存储位置。备份点的存储类型可以是FS 存储或 S3 存储，下面以节点本地存储、NFS 存储和 MINIO 存储为例：</p><p><strong>节点本地存储</strong>**（仅适用单节点实验集群）：**</p><ol><li><p>创建存储目录。连接集群 master 节点终端（可参见连接节点终端），使用 mkdir 命令，在 master 节点中创建“/root/backup”目录。</p></li><li><p>创建备份点。点击“集群管理”>“备份点”，进入备份点列表页，点击右上角“创建”按钮，在创建备份点弹窗中，输入“备份点名称”，如“local”，选择“存储类型”为“FS”，填写“备份路径”，如“/root/backup”。</p></li><li><p>设置集群备份点。创建集群时，在“集群配置”页面选择“备份点”为“local”，或者编辑已有集群，在编辑集群弹窗中的“备份点”中选择“local”。</p></li></ol><p>注意：使用本地节点存储备份文件，不需要引入外部存储，缺点是如果本地节点遭到破坏，备份文件也会丢失，所以强烈不赞成在生产环境中使用。</p><p><strong>NFS：</strong></p><ol><li><p>准备 NFS 存储。准备一台 NFS 服务，并在 NFS 服务器上创建一个用于存放备份文件的目录，如 “/data/kubeclipper/cluster-backups”。</p></li><li><p>挂载存储目录。连接集群 master 节点终端（可参见连接节点终端），使用 mkdir 命令，在每个 master 节点中创建“/data/kubeclipper/cluster-backups”目录，并 mount 到 NFS 服务器的 /data/kubeclipper/cluster-backups 目录即可，命令示例：mount -t nfs { NFS_IP }:/data/kubeclipper/cluster-backups /opt/kubeclipper/cluster-backups -o proto=tcp -o nolock。</p></li><li><p>创建备份点。点击“集群管理”>“备份点”，进入备份点列表页，点击右上角“创建”按钮，在创建备份点弹窗中，输入“备份点名称”，如“nfs”，选择“存储类型”为“FS”，填写“备份路径”为“/opt/kubeclipper/cluster-backups”。</p></li><li><p>设置集群备份点。创建集群时，在“集群配置”页面选择“备份点”为“nfs”，或者编辑已有集群，在编辑集群弹窗中的“备份点”中选择“nfs”。</p></li></ol><p><strong>MINIO：</strong></p><ol><li><p>准备 MINIO 存储。搭建 MINIO 服务，部署过程参考官网 <a href=https://docs.min.io/docs/minio-quickstart-guide.html>https://docs.min.io/docs/minio-quickstart-guide.html</a>，也可以使用已有 MINIO 服务。</p></li><li><p>创建备份点。点击“集群管理”>“备份点”，进入备份点列表页，点击右上角“创建”按钮，在创建备份点弹窗中，输入“备份点名称”，如“minio”，选择“存储类型”为“S3”，填写“bucket 名称”，如 “kubeclipper-backups”，该 bucket 将由 kubeclipper 自动创建，“Endpoint”中填写第一步 MINIO 存储服务的 ip 和端口号，填写服务用户名和密码，点击“确定”按钮。</p></li><li><p>设置集群备份点。创建集群时，在“集群配置”页面选择“备份点”为“minio”，或者编辑已有集群，在编辑集群弹窗中的“备份点”中选择“minio”。</p></li></ol><p>您可以在“集群管理”的“备份点”页面查看所有备份点列表和详细信息，并执行以下操作：</p><ul><li><p>编辑：编辑备份点描述，和 S3 类型备份点的用户名/密码。</p></li><li><p>删除：删除备份点，备份点下存在备份文件的，不允许删除。</p></li></ul><h3 id=集群备份>集群备份</h3><p>您可以点击集群操作中的“更多”>“集群备份”按钮，备份集群 ETCD 数据。</p><p>您可以在集群详情页面的备份标签页下，查看当前集群的所有备份文件，还可以对备份执行以下操作：</p><ul><li><p>编辑：编辑备份描述。</p></li><li><p>恢复：执行集群恢复操作，将集群恢复至指定备份状态。</p></li><li><p>删除：删除指定备份文件。</p></li></ul><h3 id=定时备份>定时备份</h3><p>您也可以为集群创建定时备份，点击集群操作中的“更多”>“定时备份”按钮，在定时备份弹窗中，输入定时备份名称、执行类型（重复执行/仅执行一次）和执行时间，并为重复执行的定时备份设置有效备份个数，点击“确认”按钮。</p><p>kubeClipper 会在您设置的执行时间为集群执行备份任务，备份文件会自动命名为“集群名称-定时备份名称-随机码”，对于重复执行的定时备份，kubeClipper 会在该定时任务下的备份文件超过有效备份个数时，自动删除超出个数的较晚的备份文件。</p><p>定时备份添加完成后，可以在集群详情页的“定时备份”标签页查看定时备份信息，也可以在“备份”标签页查看定时备份产生的备份文件。</p><p>对于定时备份任务，您还可以执行以下操作：</p><ul><li><p>编辑：编辑定时备份任务执行时间，和重复执行的定时备份的有效备份个数。</p></li><li><p>启用/禁用：禁用的定时备份任务将暂时停止执行。</p></li><li><p>删除：删除定时备份任务。</p></li></ul><h3 id=集群备份恢复>集群备份恢复</h3><p>如果您在集群正常运行期间执行恢复操作，则 KubeClipper 将对该集群进行覆盖式恢复，就是备份文件里面的 etcd 数据，覆盖现有的数据。</p><p>您可以在集群详情页的备份标签页下，点击备份右侧的 “恢复”按钮；或点击集群操作中的“更多”>“恢复集群”按钮，在恢复集群弹窗中选择需要恢复的备份，可以将当前集群恢复至指定备份状态。</p><p>注意：集群升级后，将无法再恢复到升级前版本的备份。</p></div><div class=td-content style=page-break-before:always><h1 id=pg-f8b869abb7ea8ad8dbef714007033263>4.2 - 节点管理</h1><div class=lead>KubeClipper 节点管理功能使用指南</div><p>在“节点信息”页面，您可以查看平台中管理的全部节点列表，节点规格、状态等信息。点击节点名称进入节点详情页面，您可以查看详细的节点基本信息和系统信息。</p><p><img src=/images/docs-tutorials/node-info.png alt></p><p>KubeClipper 中的节点状态表示 kc-gent 对节点的管理状态。正常情况下，节点状态显示为“就绪”，当节点失联4分钟（误差时间10s内）后，状态会更新为“未知”，未知状态的节点无法进行任何操作，也无法创建集群或为集群添加/移除节点。</p><h2 id=添加节点>添加节点</h2><p>在部署 KubeClipper 时，您就可以添加初始的 server 节点和 agent 节点，其中，server节点用于部署 KubeClipper 自身服务，agent 节点可用于部署 K8S 集群。在用于实验或开发的 KubeClipper 环境，您可以将 server 节点同时添加为 agent 节点。但如果用于生产环境，建议不要将 server 节点复用为 agent 节点。</p><p>您也可以使用 kcctl join 命令为 KubeClipper 添加 agent 节点。同时，您可以为每个 agent 节点标记一个区域，区域可以是物理的或逻辑的位置，您可以使用同一区域的节点创建 K8S 集群，但不可以使用跨区域的节点创建集群。未标记区域的节点默认属于 default 区域。详情参见“Kcctl 操作指南“。</p><p>命令行示例：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Plaintext data-lang=Plaintext><span style=display:flex><span>kcctl join --agent beijing:1.2.3.4 --agent shanghai:2.3.4.5
</span></span></code></pre></div><h2 id=移除节点>移除节点</h2><p>当您不再需要某些节点，可以使用 kcctl drain 命令将节点从平台中移除。详情参见“Kcctl 操作指南“。</p><p>命令行示例：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Plaintext data-lang=Plaintext><span style=display:flex><span>kcctl drain --agent 192.168.10.19
</span></span></code></pre></div><h2 id=连接终端>连接终端</h2><p>在节点列表页面，您可以点击目标节点右侧的“连接终端”按钮，在连接终端的弹窗中输入节点端口和用户名密码信息后，访问节点SSH控制台并执行命令。</p><p><img src=/images/docs-tutorials/node-terminal.png alt></p></div><div class=td-content style=page-break-before:always><h1 id=pg-9db4787abe05db7c233072bf3fa9f94e>4.3 - 访问控制</h1><div class=lead>KubeClipper 访问控制功能使用指南</div><h2 id=创建用户>创建用户</h2><p>安装 KubeClipper 之后，您需要创建所需角色的用户。一开始，系统默认只有一个用户 admin，具有平台管理员角色。</p><p>点击“访问控制”>“用户”，进入用户管理页面，点击左上角“创建用户”按钮，在弹窗中填写用户名、密码、手机号码、邮箱等信息，并指定用户角色，点击“确认”按钮。系统内置四个角色如下：</p><ul><li><p>平台管理员：拥有平台配置、集群管理、用户管理、DNS解析、审计等全部平台查看和操作权限。</p></li><li><p>集群管理员：拥有所有集群管理权限。</p></li><li><p>用户管理员：拥有所有用户管理权限。</p></li><li><p>平台只读用户：拥有全部平台查看权限。</p></li></ul><p>用户创建完成后，您可以在用户详情页面查看用户详情信息和登录日志，并执行以下操作：</p><ul><li><p>编辑：编辑用户别名、角色、手机号、邮箱信息。</p></li><li><p>编辑密码：编辑用户登录密码。</p></li><li><p>删除：删除用户。</p></li></ul><h2 id=创建自定义角色>创建自定义角色</h2><p>除了系统内置角色，您也可以创建自定义角色，已满足业务需要。</p><p>点击“访问控制”>“角色”，进入角色管理页面，您可以点击左上角“创建角色”按钮，创建自定义角色。</p><p>在创建角色页面，您需要填写角色名称和描述，并勾选自定义角色所需权限，一些权限依赖于其他权限，在选择这些权限时，将自动选中依赖的权限。</p><p><img src=/images/docs-tutorials/role-policy.png alt></p><p>创建自定义角色完成后，您可以在角色详情页面查看角色基本信息、角色权限列表、授权用户列表，并对自定义角色执行以下操作：</p><ul><li><p>编辑：编辑自定义角色别名。</p></li><li><p>编辑权限：编辑自定义角色下的权限。</p></li><li><p>删除：删除自定义角色，需确保没有用户使用待删除角色。</p></li></ul><h2 id=接入外部用户>接入外部用户</h2><p>KubeClipper 可以通过 OIDC 协议使用外部用户登录。</p><p>首先，平台管理员需要登录平台 server 节点，在 kubeclipepr-server.yaml 文件中的 authentication 下插入以下信息：</p><pre tabindex=0><code class=language-undefined data-lang=undefined>oauthOptions:    identityProviders:    - name: keycloak      type: OIDC      mappingMethod: auto      provider:        clientID: kc        clientSecret: EErn729BB1bKawdRtnZgrqj9Bx0]mzUs        issuer: http://172.20.163.233:7777/auth/realms/kubeclipper        scopes:        - openid        - email        redirectURL: http://{kc-console-address}/oatuh2/redirect/{IDP-Name}
</code></pre><p>其中，“provider”下需要您填写自己的 OAuth2 服务的<code>clientID</code>、<code>clientSecret</code>、<code>issuer</code>信息，以 keycloack 为例，如下图所示。</p><p><code>redirectURL</code>示例：http://172.0.0.90/oauth2/redirect/keycloack</p><p><img src=/images/docs-tutorials/keycloak-client.png alt></p><p><img src=/images/docs-tutorials/keycloak-client2.png alt></p><p>OAuth2 用户可以通过以下步骤访问和使用 KubeClipper 平台：</p><ol><li><p>点击登录页的“OAuth2 登录”按钮，进入 OAuth2 登录页面，输入用户名密码登录，进入 KubeClipper 平台，首次登录，您会因未被授予权限而无法访问平台。</p></li><li><p>平台管理员或其他拥有用户管理权限的用户登录 KubeClipper，在用户管理页面，找到目标 OAuth2 用户，通过编辑用户指定用户角色。</p></li><li><p>OAuth2 用户重复第一步，登录 KubeClipper，就可以正常访问平台并执行角色权限内操作。</p></li></ol></div><div class=td-content style=page-break-before:always><h1 id=pg-8efbf7499fe9c7bde8d2c1bb7ff6ee3c>5 - 贡献指南</h1><div class=lead>How to contribute to the kubeclipper</div><p>请查看 <a href=https://github.com/kubeclipper/community>KubeClipper Community</a></p></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/kubeclipper/kubeclipper aria-label=GitHub><i class="fab fa-github"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 KubeClipper 保留所有权利</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>隐私政策</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/v1.1/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script></body></html>